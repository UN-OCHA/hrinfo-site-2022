{#
/**
 * @file
 * Theme override to display the Upcoming Events paragraph type.
 *
 * @overrides html/modules/custom/hr_paragraphs/templates/upcoming-events.html.twig
 */
#}
{{ attach_library('common_design_subtheme/hri-events') }}

{% set previousEventStart = '' %}

<div class="hri-events">
  <ul class="hri-events__list">
    {% for event in events %}
      {% if previousEventStart != event.start|date("d M Y") %}
        <li class="hri-events__heading event-heading">
          <div class="event-heading__date">
            {{ event.start|date("d M Y") }}
          </div>
          <div class="event-heading__day">
            {{ event.start|date("l")|t }}
          </div>
        </li>
      {% endif %}

      {% set event_classes = event.description != '' ? ' hri-event--has-desc' : '' %}

      <li class="hri-events__event hri-event{{ event_classes }}">
        <span class="hri-event__title" title="{{ event.description|replace({'&nbsp;': ' ', '<br>': ' '})|striptags|trim }}">{{ event.title }}</span>
        <span class="hri-event__time">
          <time datetime="{{ event.start|date("c") }}">{{ event.start|date("h:i A") }}</time>
          <span class="visually-hidden">{{ 'until'|t }}</span>-
          <time datetime="{{ event.end|date("c") }}">{{ event.end|date("h:i A") }}</time>
        </span>
      </li>

      {% set previousEventStart = event.start|date("d M Y") %}
    {% endfor %}
  </ul>
  <a href="{{ read_more.url }}">{{ read_more.title|t }}</a>
</div>
